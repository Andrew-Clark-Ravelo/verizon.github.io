/*! VZRF Version 2.20.0 */
function ratingInit(a){var t=getContext(a);$vf("[data-rating-avg]").each(function(){var a=$vf(this);ratingSetAverage(a)}),t.off("click keypress","[data-rating-value]"),t.on("click keypress","[data-rating-value]",function(a){if(keyClick(a)===!0){a.preventDefault();var t=$vf(this);ratingSetPersonal(t)}}),$vf("[data-rating-id]").each(function(){var a=$vf(this);a[0].hasAttribute("tabindex")===!1&&a.attr("tabindex",0),a.attr({"aria-valuemin":1,"aria-valuemax":5})}),$vf("[data-rating-value]").each(function(){var a=$vf(this),t=a.attr("data-rating-value");a.attr({role:"button","aria-label":"select to rate "+t+" out of 5 stars",tabindex:-1})}),t.off("keydown keypress","[data-rating-id]:not([data-rating-avg])"),t.on("keydown keypress","[data-rating-id]:not([data-rating-avg])",function(a){var t,e,i=$vf(this);t=$vf("[data-rating-value].active",i).length?parseInt($vf("[data-rating-value].active",i).attr("data-rating-value"),10):!1,36===a.which||49===a.charCode?(a.preventDefault(),$vf("[data-rating-value=1]",i).click()):35===a.which||53===a.charCode?(a.preventDefault(),$vf("[data-rating-value=5]",i).click()):50===a.charCode?(a.preventDefault(),$vf("[data-rating-value=2]",i).click()):51===a.charCode?(a.preventDefault(),$vf("[data-rating-value=3]",i).click()):52===a.charCode?(a.preventDefault(),$vf("[data-rating-value=4]",i).click()):48===a.charCode?1>t||t===!1||$vf("[data-rating-value="+t+"]",i).click():37===a.which||40===a.which?(a.preventDefault(),1>t||t===!1||(e=1===t?1:t-1),$vf("[data-rating-value="+e+"]",i).click()):38===a.which||39===a.which?(a.preventDefault(),5===t||(e=1>t||t===!1?1:t+1),$vf("[data-rating-value="+e+"]",i).click()):27===a.which&&(a.preventDefault(),i.focus())})}function ratingSetPersonal(a){var t=a.attr("data-rating-value"),e=a.parent().attr("data-rating-id"),i="m_inactive-node",r="m_active-node";return a.is(".active")?(a.removeClass("active "+r).addClass(i),a.siblings().removeClass(r).addClass(i),-1):(a.siblings().removeClass("active"),a.addClass("active").focus(),$vf("[data-rating-id="+e+"] > [data-rating-value]").each(function(){var a=$vf(this),e=a.attr("data-rating-value");t>=e?a.hasClass(r)||a.removeClass(i).addClass(r):e>t&&a.hasClass(r)&&a.removeClass(r).addClass(i)}),$vf("[data-rating-id="+e+"]").attr("aria-valuenow",t),t)}function ratingSetAverage(a){var t=a.children("[data-rating-reviews]"),e=a.find(".rating_avg-container").width()+1,i=parseFloat(a.attr("data-rating-avg")).toFixed(1),r=t.attr("data-rating-reviews").toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");$vf(".rating_avg-container",a).width(e).attr(""),$vf(".rating_avg-constrictor",a).width(i/5*e),a.attr({title:i+" out of 5","aria-label":"Average rating is "+i+" out of 5","aria-valuenow":i}),t.text("("+r+")").attr("aria-label","Total Reviews: "+r)}var setPersonal=ratingSetPersonal,setAverage=ratingSetAverage;