/*! VZRF Version 2.20.0 */
function modalInit(a){var e=getContext(a);$vf("[data-modal]").addClass("vzrf"),e.off("click keypress","[data-open-modal]"),e.on("click keypress","[data-open-modal]",function(a){if(keyClick(a)===!0){var e=$vf(this).attr("data-open-modal");if($vf(this).attr("aria-haspopup","false"),$vf(this).hasClass("disabled"))return!1;if($vf(this).is("[data-modal-section]")){var t=$vf(this).attr("data-modal-section");openModal(e,t)}else openModal(e)}}),e.off("click keypress","[data-close-modal]"),e.on("click keypress","[data-close-modal]",function(a){if(keyClick(a)===!0){var e=$vf("[data-modal].active"),t=$vf(this).is("[data-open-modal]");if($vf("[data-open-modal]").attr("aria-haspopup","true"),$vf(this).hasClass("disabled"))return!1;if($vf(this).is("[data-validate-form]")){if(!$vf("form",e).parsley().isValid())return!1;closeModal(e,t)}else closeModal(e,t)}}),$vf("[data-modal]",e).off("click keypress","[data-modal-height], [data-accordion], [data-tab], [data-reveal-trigger], [data-reveal-trigger] + label"),$vf("[data-modal]",e).on("click keypress","[data-modal-height], [data-accordion], [data-tab], [data-reveal-trigger], [data-reveal-trigger] + label",function(a){var e=setInterval(function(){modalHeightSetter()},10);setTimeout(function(){clearInterval(e),modalHeightSetter(),$vf("[data-modal].active [data-modal-content]").css("overflow-y","auto")},325)}),e.off("click",".page-overlay"),e.on("click",".page-overlay",function(){var a=$vf("[data-modal].active");a.is("[data-disable-overlay-close]")||closeModal(a)}),$vf(document).on("beforeOpenFilter beforeShowDropList",function(a){var e=$vf(a.target);return e.closest("[data-modal].active").length?!1:void($vf("[data-modal].active").length&&closeModal($vf("[data-modal].active")))}),$vf("[data-modal-iframe]").each(function(){modalIframeSetup($vf(this))}),e.on("afterOpenModal",function(){setTimeout(function(){modalIframeSizing()},400),setTimeout(function(){modalIframeSizing()},700)}),$vf("[data-modal]").attr({role:"dialog","aria-hidden":"true"}).prop("hidden",!0),$vf("[data-open-modal]").each(function(){var a=$vf(this);a[0].hasAttribute("tabindex")===!1&&a.attr("tabindex",0),a.attr({"aria-label":"Opens a Modal","aria-haspopup":"true"})}),$vf("[data-close-modal]").each(function(){var a=$vf(this);a[0].hasAttribute("tabindex")===!1&&a.attr("tabindex",-1),a.attr({"aria-label":"Click here or press escape key to close the modal"})})}function openModal(a,e){function t(){$vf("body, html").addClass("no-scroll"),i.addClass("active"),$vf(".page-overlay").addClass("active modal"),i.hasClass("m_show-top-bar")&&$vf(".page-overlay").addClass("show-top-bar"),$vf(window).on("keyup",function(a){9===a.which&&0==$vf(a.target).closest(i).length&&(a.preventDefault(),i.focus(),modalHeightSetter()),27===a.which&&closeModal(i)})}function o(){i.trigger("beforeActivateSectionModal");var a=d.css("position");"absolute"!=a&&"relative"!=a&&"fixed"!=a&&d.css("position","relative"),d.css("overflow","hidden").attr("data-modal-section-element","").scrollTop(0),$vf(".page-overlay").prependTo(d).addClass("modal absolute"),setTimeout(function(){$vf(".page-overlay").addClass("active")},10),i.prependTo(d).addClass("m_section"),setTimeout(function(){i.addClass("active"),modalHeightSetter()},10),i.on("keyup",function(a){27===a.which&&closeModal(i)}),i.trigger("afterActivateSectionModal")}var i;a instanceof $vf||a instanceof jQuery?i=a:a?i=$vf("[data-modal="+a+"]"):console.error("Modal not defined or does not exist"),i.trigger("beforeOpenModal"),saveFocus(),i.attr({"aria-hidden":"false",tabindex:"0"}).prop("hidden",!1),$vf("[data-close-modal]",i).attr("tabindex","0"),$vf("main").attr("aria-hidden","true").prop("hidden",!0);var l=$vf("[data-modal].active"),d=($vf("[data-modal-content]",i),$vf("[data-modal-header]",i),$vf("[data-modal-footer]",i),!1);if(e instanceof $vf||e instanceof jQuery?d=e:e&&(d=$vf("#"+e)),i.length>0){if(!i.is(".active")&&i.parent("body").length<1&&i.appendTo("body"),$vf(".page-overlay").length<1?$vf("body").append('<div class="page-overlay vzrf"></div>'):$vf(".page-overlay").addClass("vzrf"),i.is(l)&&d.length>0){var r=i.closest("[data-modal-section-element]").attr("id");if(d.attr("id")===r)return!1;i.removeClass("active"),$vf("[data-modal-section-element]").removeAttr("[data-modal-section-element]"),$vf(".page-overlay").removeClass("active"),setTimeout(function(){o()},350)}else l.length>0&&!d?(closeModal(l),setTimeout(function(){t(),modalVertAlign()},350)):l.length>0&&d.length>0?(closeModal(l,!0),setTimeout(function(){o(),modalVertAlign()},350)):d?o():t();modalHeightSetter(),setTimeout(function(){i.focus()},350)}i.trigger("afterOpenModal")}function closeModal(a,e){var t;a instanceof $vf||a instanceof jQuery?t=a:a&&(t=$vf("[data-modal="+a+"]")),t.trigger("beforeCloseModal"),$vf(window).off("keyup"),$vf("[data-close-modal]",t).attr("tabindex","-1");var o=t.height();t.css("height",o),t.removeClass("active show-top-bar"),setTimeout(function(){t.removeClass("m_section")},350);var i=$vf("[data-modal-section-element]");i.length>0&&setTimeout(function(){i.attr("style","").removeAttr("data-modal-section-element")},350),e!==!0&&($vf(".page-overlay.modal").removeClass("active modal show-top-bar"),setTimeout(function(){$vf(".page-overlay").removeClass("absolute").appendTo("body")},350),$vf("body, html").removeClass("no-scroll")),t.css("top","-100%"),$vf(":focus",t).blur(),$vf(".page.active").length>0&&setTimeout(function(){t.appendTo(".page.active")},400),setTimeout(function(){t.attr({"aria-hidden":"true",tabindex:"-1"}).prop("hidden",!0),$vf("main").attr("aria-hidden","false").prop("hidden",!1)},400),resetFocus(),t.trigger("afterCloseModal")}function modalHeightSetter(){if($vf("[data-modal].active").length<1)return!1;var a=$vf("[data-modal].active");a.trigger("beforeModalHeightSetter");var e=$vf("[data-modal-content]",a),t=$vf("[data-modal-header]",a),o=$vf("[data-modal-footer]",a);if(a[0].style.height="",e[0].style.height="",t.length){t[0].style.height="";var i=t[0].scrollHeight}else var i=0;if(o.length){o[0].style.height="";var l=o[0].scrollHeight}else var l=0;var d=$vf(window).height(),r=e[0].scrollHeight||0,n=.9;a.is(".m_cover, .m_cover-all")&&(n=1);var s=n*d,f=s-i-l;e.css({"max-height":f,height:r}),modalVertAlign(),a.trigger("afterModalHeightSetter")}function modalVertAlign(){var a=$vf("[data-modal].active"),e=a.height();a.is(".m_vert-top, m_tall")?a.css({top:"5%","margin-top":$vf(window).scrollTop()}):a.is(".m_cover, .m_cover-all")?a.css({top:0,"margin-top":$vf(window).scrollTop()}):a.css({top:"50%","margin-top":-1*e/2+$vf(window).scrollTop()})}function modalIframeSetup(a){if(a.trigger("beforeModalIframeSetup"),$vf("iframe",a).length)return!1;var e=a.attr("data-modal-iframe"),t=$vf('<iframe src="'+e+'" scrolling="no"></iframe>'),o='<div class="modal_content m_has-iframe" data-modal-content></div>';$vf("[data-modal-content]",a).length<1?$vf("[data-modal-header]",a).length?$vf("[data-modal-header]",a).after(o):$vf(".modal_x",a).length?$vf(".modal_x",a).after(o):a.prepend(o):$vf("[data-modal-content]").addClass("m_has-iframe"),$vf.get(e).fail(function(){console.error("===========================================================================\nVZRF Modal Iframe error: Cross-origin limitations\n---------------------------------------------------------------------------\nThe iframe src is required to have the same domain as the parent page.\nThis is so that the contents of the iframe can be access for programatically\ndetermining the height of the iframe'd page. If same domain is not possible\nin your situation then do not use [data-modal-iframe], but instead build your\nown custom system inside the [data-modal-content] div of the modal. You will\nlikely need to set a fixed height for the iframe in this case.\n===========================================================================")}).done(function(){$vf("[data-modal-content]",a).append(t),modalIframeSizing()}),a.trigger("afterModalIframeSetup")}function modalIframeSizing(){var a=$vf("[data-modal].active iframe");a.trigger("beforeModalIframeSizing"),iframeNewHeight=a.contents().find("body").outerHeight(),a.height(iframeNewHeight),modalHeightSetter(),a.trigger("afterModalIframeSizing")}$vf(function(){function a(a,e,t){var o;return function(){var i=this,l=arguments,d=function(){o=null,t||a.apply(i,l)},r=t&&!o;clearTimeout(o),o=setTimeout(d,e),r&&a.apply(i,l)}}$vf(window).on("resize",a(function(){$vf("[data-modal].active").length&&(modalHeightSetter(),$vf("[data-modal].active").find("iframe").length&&modalIframeSizing())},100)),$vf(window).on("orientationchange",function(){$vf("[data-modal].active").length&&(modalHeightSetter(),$vf("[data-modal].active").find("iframe").length&&modalIframeSizing())})});